BoxLayout:
    orientation: 'vertical'
    # Kivy force refresh
    canvas:
        Color:
            rgba: (0, 0, 0, 0.2)
        Rectangle:
            pos: self.pos
            size: self.size
    # End Kivy force refresh code
    BoxLayout:
        orientation: 'horizontal'

        TextInput:
            id: text_input
            text: '0'
            font_size: 40
            multiline: False
            # Automatically validate and convert on_text
            on_text: app.handle_conversion()

        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.2
            Button:
                text: 'Up'
                on_press: app.handle_increment(1)
            Button:
                text: 'Down'
                on_press: app.handle_increment(-1)
    BoxLayout:
        orientation: 'horizontal'

        Button:
            text: 'Convert Fahrenheit to Celsius'
            on_press: app.handle_conversion()

        Button:
            text: 'Switch between units'
            on_press: app.switch_units()

    Label:
        id: output_display
        text: app.display_text
        multiline: False